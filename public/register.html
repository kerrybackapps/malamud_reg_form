<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Registration - Malamud Lectures</title>
    
    <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em;
      vertical-align: middle;
    }
    </style>

    <script src="site_libs/quarto-nav/quarto-nav.js"></script>
    <script src="site_libs/clipboard/clipboard.min.js"></script>
    <script src="site_libs/quarto-html/quarto.js" type="module"></script>
    <script src="site_libs/quarto-html/popper.min.js"></script>
    <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
    <script src="site_libs/quarto-html/anchor.min.js"></script>
    <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
    <link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
    <script src="site_libs/bootstrap/bootstrap.min.js"></script>
    <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
    <link href="site_libs/bootstrap/bootstrap-52d8d4a1bc7a18dd637875c3d028be30.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<main class="content" id="quarto-document-content">

<section id="malamud-lectures-registration" class="level2" style="text-align: center; background-color: #dae5ea; padding: 20px; border-radius: 10px;">
<h2 class="anchored">Malamud Lectures<br><br>Foundations of Big Data and Machine Learning <br>in Finance, Statistics, and Beyond</h2>
</section>

<hr>

<section class="level4">
<div class="container">
    <div class="row align-items-center">
        <div class="col text-center">
            <h4 class="anchored">Mon - Thu, Sept 22-25<br>Mon - Wed, Sept 29 - Oct 1</h4>
        </div>
    </div>
</div>
</section>

<hr>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">Registration Form</h3>
                    <p class="mb-0 mt-2">Registration is not required, but it is appreciated.</p>
                </div>
                <div class="card-body">
                    <form id="registrationForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">Name *</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="email" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="department" class="form-label">Department *</label>
                            <input type="text" class="form-control" id="department" name="department" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="role" class="form-label">Role *</label>
                            <select class="form-select" id="role" name="role" required>
                                <option value="">Select your role</option>
                                <option value="faculty">Faculty</option>
                                <option value="student">Student</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">Click here to register</button>
                        </div>
                    </form>
                    
                    <div id="successMessage" class="alert alert-success mt-3 d-none" role="alert">
                        <i class="bi bi-check-circle-fill"></i> Registration successful!
                    </div>
                    
                    <div id="errorMessage" class="alert alert-danger mt-3 d-none" role="alert">
                        <i class="bi bi-exclamation-triangle-fill"></i> <span id="errorText">An error occurred. Please try again.</span>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4">
                <a href="index.html" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to Lecture Information
                </a>
            </div>
        </div>
    </div>
</div>

</main>
</div>

<script>
document.getElementById('registrationForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const button = e.target.querySelector('button[type="submit"]');
    const successMsg = document.getElementById('successMessage');
    const errorMsg = document.getElementById('errorMessage');
    const errorText = document.getElementById('errorText');
    
    // Hide any existing messages
    successMsg.classList.add('d-none');
    errorMsg.classList.add('d-none');
    
    // Disable button during submission
    button.disabled = true;
    button.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Registering...';
    
    const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        department: document.getElementById('department').value,
        role: document.getElementById('role').value
    };
    
    try {
        const response = await fetch('/api/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });
        
        const result = await response.json();
        
        if (response.ok) {
            successMsg.classList.remove('d-none');
            e.target.reset();
            
            // Scroll to success message
            successMsg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        } else {
            errorText.textContent = result.error || 'An error occurred. Please try again.';
            errorMsg.classList.remove('d-none');
        }
    } catch (error) {
        console.error('Error:', error);
        errorText.textContent = 'Network error. Please check your connection and try again.';
        errorMsg.classList.remove('d-none');
    } finally {
        button.disabled = false;
        button.innerHTML = 'Click here to register';
    }
});
</script>

</body>
</html>